# bitlyshort.py
# function to query bitly.com API with bitly provided access credential
# giving a long URL; function returns the bit.ly shortened url
# example
# result = shorten('http://www.example.com')
# result['data']['url']

import requests

#YOUR BITLY PROVIDED CREDENTIAL: see http://dev.bitly.com/get_started.html'
BITLY_GENERIC_ACCESS_TOKEN = 'abcdefghijklmnopqrstuvwxyz01234567890'


def shorten(target):
	query_params = {'access_token': BITLY_GENERIC_ACCESS_TOKEN,
					'longUrl': target} 
	endpoint = 'https://api-ssl.bitly.com/v3/shorten'
	return requests.get(endpoint, params=query_params, verify=True).json()



#print result['data']['url']
# For troubleshooting, full contents of response.json() dictionary object
'''
{'data': {'global_hash': '3hDSUb',
  'hash': '1cdxKEg',
  'long_url': 'http://www.example.com/',
  'new_hash': 0,
  'url': 'http://bit.ly/1cdxKEg'},
 'status_code': 200,
 'status_txt': 'OK'}
'''

